<html>
  <head>
    <title>Implicit function grapher</title>
    <script type="text/javascript">
    	var width=1200;
    	var height=1200;
    	var xmin=-10;
    	var xmax=10;
    	var ymin=-10;
    	var ymax=10;
    	var xscale=(xmax-xmin)/width;
    	var yscale=(ymax-ymin)/height;
    	
		function f(x, y){
			return y<Math.cos(x)
		}
		
		function f2(x, y){
			return 9<x*x+y*y
		}
    	
    	function p2gx(x){
    		return x*xscale+xmin
    	}
    	function p2gy(y){
    		return y*yscale+ymin
    	}
    	
    	function graph(ctx, f, r, g, b){
    		var canvas=document.createElement('canvas');
    		canvas.width=width*2;
    		canvas.height=height*2;
    		var ctx = canvas.getContext('2d');
    		var imgd = ctx.createImageData(width,height);
			var pix = imgd.data;
			
			var x=0; var y=0; var i=0;
			while (i<pix.length){
				pix[i  ] = r;
				pix[i+1] = g;
				pix[i+2] = b;
			
				var initial= f(p2gx(x), p2gy(y));
				if (
				   initial != f(p2gx(x+0.5), p2gy(y))
				|| initial != f(p2gx(x), p2gy(y+0.5))
				|| initial != f(p2gx(x), p2gy(y-0.5))
				|| initial != f(p2gx(x-0.5), p2gy(y))
				){
					pix[i+3] = 255;
					pix[i+7] = Math.min(255, pix[i+7]+128);
					pix[i-1] = Math.min(255, pix[i-1]+128);
					if (y<width) pix[i+width*4+3] = Math.min(255, pix[i+width*4+3]+128);
					if (y>0) pix[i-width*4+3] = Math.min(255, pix[i-width*4+3]+128);
					if (y<width) pix[i+width*4+7] = Math.min(255, pix[i+width*4+7]+90);
					if (y>0) pix[i-width*4-1] = Math.min(255, pix[i-width*4-1]+90);
					if (y<width) pix[i+width*4-1] = Math.min(255, pix[i+width*4-1]+90);
					if (y>0) pix[i-width*4+7] = Math.min(255, pix[i-width*4+7]+90);
				}
				
				i+=4;
				x+=1
				if (x==width){ x=0; y+=1 };
			}
			ctx.putImageData(imgd, 0,0);
			return canvas;
    	}
    	
		function draw(){
			var startTime=new Date()
			var canvas = document.getElementById('tutorial');
        	if (canvas.getContext){
          		var ctx = canvas.getContext('2d');
          		var g=graph(ctx, f, 255, 0, 0)
				ctx.drawImage(g, 0, 0, 1200, 1200);
				var g=graph(ctx, f2, 0, 0, 255)
				ctx.drawImage(g, 0, 0, 1200, 1200);
          
       		 }
       		 var time= new Date()-startTime
       		 console.log(time);
      }
    </script>
    <style type="text/css">
      canvas { border: 1px solid black; }
    </style>
  </head>
  <body onload="draw();">
    <canvas id="tutorial" width="600" height="600"></canvas>
  </body>
</html>

