<html>
  <head>
    <title>Canvas tutorial</title>
    <script type="text/javascript">
		function f(x, y){
			return 4<x*x+y*y
		}
    	
    	function pix2grid(v){
    		return v/100-3
    	}
		function draw(){
			var canvas = document.getElementById('tutorial');
        	if (canvas.getContext){
          		var ctx = canvas.getContext('2d');
				var imgd = ctx.createImageData(600,600);
				var pix = imgd.data;

				var x=0; var y=0; var i=0;
				while (i<pix.length){
					pix[i  ] = 0;
					pix[i+1] = 0;
					pix[i+2] = 0;
				
					var initial= f(pix2grid(x), -pix2grid(y));
					if (
					   initial != f(pix2grid(x+3), -pix2grid(y))
					|| initial != f(pix2grid(x), -pix2grid(y+3))
					|| initial != f(pix2grid(x), -pix2grid(y-3))
					|| initial != f(pix2grid(x-3), -pix2grid(y))
					|| initial != f(pix2grid(x+2.12), -pix2grid(y+2.12))
					|| initial != f(pix2grid(x-2.12), -pix2grid(y-2.12))
					|| initial != f(pix2grid(x+2.12), -pix2grid(y-2.12))
					|| initial != f(pix2grid(x-2.12), -pix2grid(y+2.12))
					){
						pix[i+3] = 255;
						pix[i+7] = Math.min(255, pix[i+7]+64);
						pix[i-1] = Math.min(255, pix[i-1]+64);
						if (y<600) pix[i+600*4+3] = Math.min(255, pix[i+600*4+3]+96);
						if (y>0) pix[i-600*4+3] = Math.min(255, pix[i-600*4+3]+96);
					}
					
					i+=4;
					x+=1
					if (x==600){ x=0; y+=1 };
				}

				// Draw the ImageData object at the given (x,y) coordinates.
				ctx.putImageData(imgd, 0,0);
          
        }
      }
    </script>
    <style type="text/css">
      canvas { border: 1px solid black; }
    </style>
  </head>
  <body onload="draw();">
    <canvas id="tutorial" width="600" height="600"></canvas>
  </body>
</html>

